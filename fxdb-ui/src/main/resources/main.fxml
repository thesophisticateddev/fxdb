<?xml version="1.0" encoding="UTF-8"?>

<?import atlantafx.base.controls.Tile?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.fxsql.components.AppMenuBar?>
<?import org.fxsql.components.notifications.NotificationContainer?>

<StackPane xmlns:fx="http://javafx.com/fxml" fx:controller="org.fxsql.MainController">
    <!-- Main content layer -->
    <VBox alignment="TOP_CENTER" spacing="10.0">

        <AppMenuBar fx:id="appMenuBar"/>
        <HBox VBox.vgrow="ALWAYS">
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0"/>
            </padding>

            <SplitPane fx:id="mainSplitPane" HBox.hgrow="ALWAYS">
                <!-- Left panel: Database browser -->
                <VBox HBox.hgrow="NEVER" prefWidth="280" minWidth="200" maxWidth="400">
                    <Tile fx:id="databaseSelectorTile"/>
                    <Separator/>
                    <HBox alignment="CENTER_LEFT" spacing="5.0">
                        <padding>
                            <Insets top="5.0" bottom="5.0" left="5.0" right="5.0"/>
                        </padding>
                        <Label text="Database Browser" style="-fx-font-weight: bold;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="Refresh" onAction="#onRefreshData" style="-fx-font-size: 11px;"/>
                    </HBox>
                    <TreeView fx:id="tableBrowser" HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS"/>

                    <!-- Plugin browser: hidden by default, shown when plugins add nodes -->
                    <Separator fx:id="pluginBrowserSeparator" visible="false" managed="false"/>
                    <HBox fx:id="pluginBrowserHeader" alignment="CENTER_LEFT" spacing="5.0"
                          visible="false" managed="false">
                        <padding>
                            <Insets top="5.0" bottom="5.0" left="5.0" right="5.0"/>
                        </padding>
                        <Label text="Plugin Browser" style="-fx-font-weight: bold;" fx:id="pluginBrowserLabel"/>
                    </HBox>
                    <TreeView fx:id="pluginBrowser" VBox.vgrow="ALWAYS" visible="false" managed="false"/>
                </VBox>

                <!-- Right panel: Tab pane for data view and scripts -->
                <VBox HBox.hgrow="ALWAYS">
                    <TabPane HBox.hgrow="ALWAYS" fx:id="actionTabPane" VBox.vgrow="ALWAYS"/>
                </VBox>
            </SplitPane>
        </HBox>

        <!-- Status bar -->
        <HBox fx:id="progressPanelBox" spacing="10.0" alignment="CENTER_LEFT"
              style="-fx-border-color: #e0e0e0; -fx-border-width: 1 0 0 0;">
            <padding>
                <Insets left="10.0" right="10.0" top="5.0" bottom="5.0"/>
            </padding>
            <Label fx:id="sqlDialectLabel" text="No connection" style="-fx-font-size: 11px;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <ProgressBar fx:id="driverLoadProgressBar" prefWidth="150.0" visible="false" managed="false"/>
        </HBox>
    </VBox>

    <!-- Floating notification layer (on top of main content) -->
    <NotificationContainer fx:id="notificationContainer" pickOnBounds="false" mouseTransparent="false">
        <StackPane.alignment>TOP_RIGHT</StackPane.alignment>
        <padding>
            <Insets top="50.0" right="10.0"/>
        </padding>
    </NotificationContainer>
</StackPane>